<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Apple é‚®ä»¶é¢„è§ˆ</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="copy-tip" id="copyTip">å·²å¤åˆ¶åˆ°å‰ªè´´æ¿</div>
    <div class="edit-button-container">
        <button class="open-button">ğŸ§© å»å¿«é€Ÿç”Ÿæˆé¡¹ç›®æˆªå›¾ â˜…â˜…â˜…</button>
        <div style="margin: 10px;text-align: center;color: #1b5efd;font-size: 12px;">ç‚¹å‡»ä¸Šæ–¹ï¼Œå¯å¿«é€Ÿç”Ÿæˆé¡¹ç›®çš„Desktop/Mobileæˆªå›¾ï¼Œå¹¶è¿›è¡Œæ‹¼å›¾æ“ä½œï¼Œæ— éœ€å»starlingæˆªå›¾ä»¥åŠä½¿ç”¨PS</div>
        <div style="text-align: center;color: #40b2f9;font-size: 12px;">ä¸‹æ–¹ï¼Œå¯å¿«é€Ÿç”Ÿæˆå¤‡ä»½é¡¹ç›®çš„å‘½åï¼Œä»¥åŠDesktop/Mobileæˆªå›¾å‘½åï¼Œç‚¹å‡»å³å¯å¤åˆ¶</div>
    </div>

    <!-- æ·»åŠ é¡¹ç›®ä¿¡æ¯è¡¨å• -->
    <div class="project-form">
        <div class="form-group">
            <label>é¡¹ç›®åç§°ï¼š</label>
            <input type="text" id="projectName" value="Holiday 2025 Still Time">
            <span class="text-tip">æ ¼å¼å‚è€ƒ: Holiday 2025 Still Time</span>
        </div>
        <div class="form-group">
            <label>é¡¹ç›®å¹´ä»½ç¼–å·ï¼š</label>
            <input type="text" id="projectYear" value="FY25 Q1">
            <span class="text-tip">æ ¼å¼å‚è€ƒ: FY25 Q1</span>
        </div>
        <div class="form-group">
            <label>é¡¹ç›®æ—¥æœŸï¼š</label>
            <input type="text" id="projectDate" value="20251212">
            <span class="text-tip">æ ¼å¼å‚è€ƒ: 20251212</span>
        </div>
        <div class="form-group">
            <label>è´Ÿè´£äººåå­—ï¼š</label>
            <input type="text" id="projectManager" value="Ivan">
        </div>
        <div class="form-group">
            <label>é¡¹ç›®è¯­è¨€ï¼š</label>
            <div class="checkbox-group">
                <label><input type="checkbox" value="HKEN" checked> HKEN</label>
                <label><input type="checkbox" value="HKTC" checked> HKTC</label>
                <label><input type="checkbox" value="MOTC" checked> MOTC</label>
                <label><input type="checkbox" value="CNSC" checked> CNSC</label>
                <label><input type="checkbox" value="TWTC" checked> TWTC</label>
                <span class="text-tip">é»˜è®¤é€‰ä¸­æ‰€æœ‰è¯­è¨€</span>
            </div>
        </div>
    </div>

    <!-- æ·»åŠ ç”Ÿæˆçš„åç§°æ˜¾ç¤ºåŒºåŸŸ -->
    <div class="generated-names">
        <div class="name-group">
            <h3>å¤‡ä»½æ–‡ä»¶é¡¹ç›®åç§°(ç‚¹å‡»å¤åˆ¶)ï¼š</h3>
            <div class="copyable" id="backupFileName"></div>
        </div>
        <div class="name-group">
            <h3>å¤‡ä»½æˆªå›¾é¡¹ç›®åç§°(ç‚¹å‡»å¤åˆ¶)ï¼š</h3>
            <div class="copyable" id="backupScreenshotName"></div>
        </div>
        <div class="name-group">
            <h3>æˆªå›¾åç§°(ç‚¹å‡»å¤åˆ¶)ï¼š</h3>
            <div id="screenshotNames"></div>
        </div>
    </div>

    <script>
        // åªä¿ç•™å¿…è¦çš„ DOM å…ƒç´ 
        const elements = {
            openButton: document.querySelector('.open-button')
        };

        // åªä¿ç•™æ‰“å¼€æ–°æ ‡ç­¾é¡µçš„åŠŸèƒ½
        elements.openButton.addEventListener('click', () => {
            window.open('../standbyScreenshot/index.html', '_blank');
        });

        function updateNames() {
            const projectName = document.getElementById('projectName').value;
            const projectYear = document.getElementById('projectYear').value;
            const projectDate = document.getElementById('projectDate').value;
            const projectManager = document.getElementById('projectManager').value;
            const selectedLanguages = Array.from(document.querySelectorAll('.checkbox-group input:checked')).map(cb => cb.value);

            // ä¿å­˜é¡¹ç›®è´Ÿè´£äººåˆ°æœ¬åœ°å­˜å‚¨
            const userInfo = localStorage.getItem('userInfo') ? JSON.parse(localStorage.getItem('userInfo')) : {};
            userInfo.username = projectManager;
            localStorage.setItem('userInfo', JSON.stringify(userInfo));

            // æ›´æ–°å¤‡ä»½æ–‡ä»¶é¡¹ç›®åç§°
            const backupFileName = `${projectDate}-${projectName}_${projectManager}`;
            document.getElementById('backupFileName').textContent = backupFileName;

            // æ›´æ–°å¤‡ä»½æˆªå›¾é¡¹ç›®åç§°
            const backupScreenshotName = `${projectYear}-${projectName}`;
            document.getElementById('backupScreenshotName').textContent = backupScreenshotName;

            // æ›´æ–°æˆªå›¾åç§°
            const screenshotNamesContainer = document.getElementById('screenshotNames');
            screenshotNamesContainer.innerHTML = '';

            selectedLanguages.forEach(lang => {
                const desktopName = `${projectYear} ${projectName}_Desktop_${lang.substring(0,2)}_${lang.substring(2)}_${projectDate}.png`;
                const mobileName = `${projectYear} ${projectName}_Mobile_${lang.substring(0,2)}_${lang.substring(2)}_${projectDate}.png`;

                const langGroup = document.createElement('div');
                langGroup.innerHTML = `
                    <div class="language-group">
                        <h4>${lang}:</h4>
                        <div class="screenshot-name" onclick="copyText('${desktopName}')">${desktopName}</div>
                        <div class="screenshot-name" onclick="copyText('${mobileName}')">${mobileName}</div>
                    </div>
                `;
                screenshotNamesContainer.appendChild(langGroup);
            });
        }

        function copyText(text) {
            navigator.clipboard.writeText(text).then(() => {
                const tip = document.getElementById('copyTip');
                tip.classList.add('show');
                setTimeout(() => {
                    tip.classList.remove('show');
                }, 1000);
            }).catch(err => {
                console.error('å¤åˆ¶å¤±è´¥ï¼š', err);
            });
        }

        // æ·»åŠ äº‹ä»¶ç›‘å¬å™¨
        document.querySelectorAll('.project-form input').forEach(input => {
            input.addEventListener('input', updateNames);
        });

        // ä¸ºå¯å¤åˆ¶çš„å…ƒç´ æ·»åŠ ç‚¹å‡»äº‹ä»¶
        document.querySelectorAll('.copyable').forEach(element => {
            element.addEventListener('click', function() {
                copyText(this.textContent);
            });
        });

        // ä»æœ¬åœ°å­˜å‚¨åŠ è½½ç”¨æˆ·å
        if (localStorage.getItem('userInfo')) {           
            const userInfo = JSON.parse(localStorage.getItem('userInfo'));
            if (userInfo.username) {
                document.getElementById('projectManager').value = userInfo.username;
            }
        }

        // åˆå§‹åŒ–æ˜¾ç¤º
        updateNames();
    </script>
</body>

</html>