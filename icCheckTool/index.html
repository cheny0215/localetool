<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>文本对比工具</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.3/codemirror.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.3/theme/elegant.min.css">
    <style>
        body {
            font-family: Arial, sans-serif;
        }

        .signs {
            color: #bebdbd;
            font-size: 12px;
            padding: 5px;
        }

        .dragText {
            width: 50px;
            height: 30px;
            padding: 8px;
            margin: 0px 8px;
            line-height: 15px;
            font-size: 12px;
            display: block;
            margin-top: 20px;
            border-radius: 4px;
            background-color: rgb(136 39 39);
            border: 1px solid rgb(220, 156, 156);
            color: #fff;
            text-decoration: none;
            text-align: center;
        }

        .a-box {
            display: flex;
        }
    </style>
</head>

<body>
    <div class="signs">将以下元素拖拽到浏览器上方<br>即可存为书签直接使用。</div>
    <div class="a-box">

        <a class="dragText"
            href="javascript:(function(){let checkPadding_bol=document.getElementById('iframe_0').contentWindow.document.querySelectorAll(`div[style*='pointer-events: none']`);function checkPadding(){let iframewindow_des=document.getElementById('iframe_0').contentWindow;let iframewindow_mob=document.getElementById('iframe_1').contentWindow;if(checkPadding_bol.length==0){function highlightPadding(element,level,iframewindow){const colors=['rgba(255, 0, 0, 0.5)','rgba(0, 0, 255, 0.5)','rgba(255, 255, 0, 0.5)'];const color=colors[level%colors.length];const style=iframewindow.getComputedStyle(element);const paddingRight=parseFloat(style.paddingRight);const paddingLeft=parseFloat(style.paddingLeft);if(paddingRight>0||paddingLeft>0){const paddingOverlay=document.createElement('div');paddingOverlay.style.position='absolute';paddingOverlay.style.top=0;paddingOverlay.style.left=0;paddingOverlay.style.width='100%';paddingOverlay.style.height='100%';paddingOverlay.style.boxSizing='border-box';paddingOverlay.style.pointerEvents='none';paddingOverlay.style.borderRight=paddingRight+'px solid '+color;paddingOverlay.style.borderLeft=paddingLeft+'px solid '+color;element.appendChild(paddingOverlay);element.style.position='relative';}Array.from(element.children).forEach(child=>highlightPadding(child,level+1,iframewindow));}highlightPadding(document.getElementById('iframe_0').contentWindow.document.body,0,iframewindow_des);highlightPadding(document.getElementById('iframe_1').contentWindow.document.body,0,iframewindow_mob);}else{function clearPaddingHighlights(iframewindow){const overlays=iframewindow.document.querySelectorAll(`div[style*='pointer-events: none']`);overlays.forEach(overlay=>{overlay.parentElement.style.position='';overlay.remove();});}clearPaddingHighlights(document.getElementById('iframe_0').contentWindow);clearPaddingHighlights(document.getElementById('iframe_1').contentWindow);}}checkPadding();})();">Padding
            Check</a>

        <a class="dragText"
            href="javascript:(function(){let iframewindow_des=document.getElementById('iframe_0').contentWindow,iframewindow_mob=document.getElementById('iframe_1').contentWindow,link1='',link2='',uikit_link=document.createElement('link');uikit_link.rel='stylesheet',uikit_link.href='https://cdn.jsdelivr.net/npm/uikit@3.21.9/dist/css/uikit.min.css';let uikit_script=document.createElement('script');uikit_script.src='https://cdn.jsdelivr.net/npm/uikit@3.21.9/dist/js/uikit.min.js',uikit_script.defer=!0;let head=document.head||document.getElementsByTagName('head')[0];head.appendChild(uikit_link),head.appendChild(uikit_script);const diffBoxs=document.createElement('div');diffBoxs.className='diffBox';const htmlConstract=` <div id='modal-example' uk-modal>        <div class='uk-modal-dialog uk-modal-body'>            <h2 class='uk-modal-title'>ic平台链接对比工具说明</h2>            <p>1. 打开ic平台，右上角下拉选项切换到HTML</p>            <p>2. 然后先点击左侧本地化页面中的链接，再点击右侧US页面中对应的链接，地址栏就会显示链接中的差异</p>            <p>3. <span class='diff-removed'>红色</span>代表左侧链接中删除的部分，<span class='diff-added'>绿色</span>代表相比于左侧新增加的部分</p>            <p class='uk-text-right'>                <button class='uk-button uk-button-primary uk-modal-close' type='button'>我已知晓</button>            </p>        </div>    </div>    <div class='diffBox'>        <div>            <span>对比结果: </span>            <button class='uk-button uk-button-secondary clkTosmalls'>收起&gt;</button>            <button class='uk-button uk-button-danger clkToclear'>清空链接</button>            <button class='uk-button uk-button-default clkTostyle'>链接样式</button>            <button class='uk-button uk-button-secondary clkToblank'                uk-tooltip='title:（推荐）可同时打开选中的两个链接，但需要在浏览器中设置，以谷歌浏览器为例=>设置=>隐私和安全=>网站设置=>弹出式窗口和重定向=>允许网站发送弹出式窗口; delay: 500'                tabindex='0'>打开链接</button>            <a class='uk-button uk-button-link clkTolink1' target='_blank'>跳转链接1</a>            <a class='uk-button uk-button-link clkTolink2' target='_blank'>跳转链接2</a>            <button class='uk-button uk-button-default' type='button'                uk-toggle='target: #modal-example'>工具说明</button>        </div>        <div id='diff-link'>            <div></div>            <div></div>        </div></div>%60;document.body.insertAdjacentHTML('beforeend',htmlConstract);const style=document.createElement('style'),diff_script=document.createElement('script');style.textContent=%60          a.highlight {              color: red!important;              font-weight: bold!important;              text-decoration: underline!important;              background: yellow!important;              padding: 5px!important;              border: 2px solid black!important;          }                .diff {                background-color: yellow;                   }                     .diffBox{                   width:100%;position: fixed;top: 0;background-color: rgba(255, 255, 255, 0.93);padding: 10px 8px;border: 1px solid #666;          }          .diff-output {              width: 100%;              overflow: auto;              white-space:nowrap;              margin-top: 10px;              border: 1px solid #ddd;              padding: 4px;              font-size:14px;          }          .diff-added {              background-color: #d4fcbc;          }          .diff-removed {              background-color: #fbb6c2;          }               .clkTosmalls,.clkToclear,.clkTostyle,.clkToblank{              white-space: nowrap;          }              .uk-button{            border-radius: 4px;            font-size: 14px;            width: 70px;            line-height: 22px;            padding: 0;        }        .uk-button-link{            text-decoration: underline;        }            %60;const iframeStyle_des=iframewindow_des.document.createElement('style'),iframeStyle_mob=iframewindow_mob.document.createElement('style');iframeStyle_des.textContent=%60          a.highlight {              color: red!important;              font-weight: bold!important;              text-decoration: underline!important;              background: yellow!important;              padding: 5px!important;              border: 2px solid black!important;          }            %60,iframeStyle_mob.textContent=%60          a.highlight {              color: red!important;              font-weight: bold!important;              text-decoration: underline!important;              background: yellow!important;              padding: 5px!important;              border: 2px solid black!important;          }            %60,diff_script.src='https://cdnjs.cloudflare.com/ajax/libs/jsdiff/5.0.0/diff.min.js',document.head.appendChild(style),iframewindow_des.document.head.appendChild(iframeStyle_des),iframewindow_mob.document.head.appendChild(iframeStyle_mob),document.head.appendChild(diff_script);const links_des=iframewindow_des.document.querySelectorAll('a'),links_mob=iframewindow_mob.document.querySelectorAll('a'),diffBox=document.querySelector('.diffBox'),clkTosmalls=document.querySelector('.clkTosmalls'),clkToclear=document.querySelector('.clkToclear'),clkTostyle=document.querySelector('.clkTostyle'),clkToblank=document.querySelector('.clkToblank'),clkTolink1=document.querySelector('.clkTolink1'),clkTolink2=document.querySelector('.clkTolink2'),spanslist=document.querySelectorAll('#diff-link div');let clkTosmalls_switch=!0;function changeIframeLinkStyle(t){clkTostyle.addEventListener('click',function(){t[0].classList.contains('highlight')?t.forEach(t=>{t.classList.remove('highlight')}):t.forEach(t=>{t.classList.add('highlight')})}),t.forEach(t=>{t.classList.add('highlight'),t.addEventListener('click',function(e){e.preventDefault(),compareLinks(t)})})}function compareLinks(t){link1&&link2&&(spanslist[0].innerText=link1=spanslist[1].innerText=link2=''),link2=link1?t.href:'',link1=link1||t.href,clkTolink1.href=link1,clkTolink2.href=link2,console.log('link1:',link1,'link2:',link2);var e=Diff.diffWords(link1,link2);console.log('diff',e);var i=e.map(function(t){var e=t.removed?'diff-removed':'';if(!t.removed&&!t.added||t.removed)return%60<span class='${e}'>${t.value.replace(/\n/g,'<br>')}</span>%60}).join(''),l=e.map(function(t){var e=t.added?'diff-added':'';if(!t.removed&&!t.added||t.added)return%60<span class='${e}'>${t.value.replace(/\n/g,'<br>')}</span>%60}).join('');spanslist.forEach(t=>{t.classList.add('diff-output')}),spanslist[0].innerHTML=i,spanslist[1].innerHTML=l}clkTosmalls.onclick=()=>{'none'===spanslist[0].style.display?(spanslist[0].style.display=spanslist[1].style.display='block',clkTosmalls.textContent='收起>'):(spanslist[0].style.display=spanslist[1].style.display='none',clkTosmalls.textContent='展开<'),clkTosmalls_switch?diffBox.style.width='10%':diffBox.style.width='100%',clkTosmalls_switch=!clkTosmalls_switch},clkToclear.addEventListener('click',function(){spanslist[0].innerText=link1='',spanslist[1].innerText=link2=''}),clkToblank.addEventListener('click',function(){[link1,link2].forEach((t,e)=>{window.open(t,'_blank',%60width=800,height=600,top=${200+50*e},left=${500*e},%60)})}),changeIframeLinkStyle(links_des),changeIframeLinkStyle(links_mob);}())">Link
            Compare</a>

        <a class="dragText"
            href="javascript:(function(){let uikit_link=document.createElement('link');uikit_link.rel='stylesheet';uikit_link.href='https://cdn.jsdelivr.net/npm/uikit@3.21.9/dist/css/uikit.min.css';let uikit_script=document.createElement('script');uikit_script.src='https://cdn.jsdelivr.net/npm/uikit@3.21.9/dist/js/uikit.min.js';uikit_script.defer=true;let head=document.head||document.getElementsByTagName('head')[0];head.appendChild(uikit_link);head.appendChild(uikit_script);const frame0=document.getElementById('iframe_0'),frame1=document.getElementById('iframe_1'),frame2=document.getElementById('iframe_2'),htmlElement=`<div class='diff-output'><div style='padding: 5px 8px;'><button class='cyBtn uk-button uk-button-secondary'>收起</button><button class='cyBtn uk-button uk-button-default'>Desktop/Mobile文本对比</button><button class='cyBtn uk-button uk-button-default'>HTML/TXT文本对比</button><button class='cyBtn uk-button uk-button-secondary'>Desktop/Mobile链接对比</button></div><div class='diff-title'><strong></strong><strong></strong></div><div class='diff-box'><div></div><div></div></div></div>`;if(!frame2){alert('请将右上角下拉菜单切换到Local，再重新打开工具');document.querySelector('.input-group').style.border='3px solid red';throw new Error('错误信息，text-compare工具只适用于destop和mobile、text对比')}const script=document.createElement('script');script.src='https://cdnjs.cloudflare.com/ajax/libs/jsdiff/5.0.0/diff.min.js';document.head.appendChild(script);const style=document.createElement('style');style.textContent=`.diff-added{background-color:#b4fb8b;}.diff-removed{background-color:#fa92a3;}.diff-box{display:flex;justify-content:space-between;padding:0 10px;}.diff-box>div{width:48%;border:1px solid #999;font-size:14px;padding:10px;}.diff-output{width:100%;max-height:100vh;overflow:auto;position:fixed;top:0;background-color:rgba(255,250,254,0.98);padding:10px 0;border:1px solid #666;box-shadow:0 4px 8px rgba(0, 0, 0, 0.2);}.uk-button{margin-right:4px;border-radius:4px;font-size:12px;line-height:20px;padding:0 6px;}.uk-button-default{border:1px solid #333;}.uk-button-link{text-decoration:underline;}.diff-title{display:flex;justify-content:space-around;padding:6px 0;}.diff_linkbox{border:1px solid #999;font-size:14px;padding:6px;overflow:auto;white-space:nowrap;box-sizing:border-box;}.diff_linkbox::-webkit-scrollbar{display:none;}.diff-con{border-radius:4px;padding:2px;}`;document.head.appendChild(style);document.body.insertAdjacentHTML('beforeend',htmlElement);let diffCount1=0,diffCount2=0;const spansText=document.querySelectorAll('.diff-box div'),cyBtn=document.querySelectorAll('.cyBtn'),diffTitle=document.querySelectorAll('.diff-title strong'),desktopContainer=frame0.contentWindow.document.querySelector('.desktop-container'),mobileContainer=frame0.contentWindow.document.querySelector('.mobile-container'),tableContainer=frame0.contentWindow.document.querySelector('table'),txtContainer=frame2.contentWindow.document.body,diffOutput=document.querySelector('.diff-output'),text_desktopContainer=desktopContainer.textContent.replace(/\s+/g,' ').trim(),text_mobileContainer=mobileContainer.textContent.replace(/\s+/g,' ').trim(),text_txtContainer=txtContainer.textContent.replace(/\s+/g,' ').replace(/https:\/\/[^\s]+/g,'').replace(/-{2,}\s*/g,'').trim(),text_htmlContainer=tableContainer.textContent.replace(/\s+/g,' ').trim();function getAllLinks(container){const links=container.querySelectorAll('a'),linkAddresses=Array.from(links).map(link=>link.href);return linkAddresses}const link_desktopContainer=getAllLinks(desktopContainer),link_mobileContainer=getAllLinks(mobileContainer);function compareTexts(text1,text2){diffCount1=diffCount2=0;let diff=Diff.diffWords(text1,text2);console.log('diff',diff);const diff_text1=diff.map(function(part){diffCount1=part.removed?diffCount1+1:diffCount1;const color=part.removed?'diff-removed':'';if((!part.removed&&!part.added)||part.removed){return`<span class='${color}'>${part.value.replace(/\n/g,'<br>')}</span>`}}).join(''),diff_text2=diff.map(function(part){diffCount2=part.added?diffCount2+1:diffCount2;const color=part.added?'diff-added':'';if((!part.removed&&!part.added)||part.added){return`<span class='${color}'>${part.value.replace(/\n/g,'<br>')}</span>`}}).join('');spansText[0].innerHTML=diff_text1;spansText[1].innerHTML=diff_text2}function compareLinks(link1,link2){let diff=Diff.diffLines(link1,link2),diff_link1=diff.map(function(part){diffCount1=part.removed?diffCount1+1:diffCount1;const color=part.removed?'diff-removed':'';if((!part.removed&&!part.added)||part.removed){return`<span class='${color}'>${part.value.replace(/\n/g,'<br>')}</span>`}}).join(''),diff_link2=diff.map(function(part){diffCount2=part.added?diffCount2+1:diffCount2;const color=part.added?'diff-added':'';if((!part.removed&&!part.added)||part.added){return`<span class='${color}'>${part.value.replace(/\n/g,'<br>')}</span>`}}).join('');spansText[0].insertAdjacentHTML('beforeend',`<div class='diff_linkbox'>${diff_link1}<div>`);spansText[1].insertAdjacentHTML('beforeend',`<div class='diff_linkbox'>${diff_link2}<div>`)}cyBtn[1].addEventListener('click',function(){compareTexts(text_desktopContainer,text_mobileContainer);diffTitle[0].innerHTML=`Desktop文本 <span class='diff-removed diff-con'>diff: ${diffCount1}</span>`;diffTitle[1].innerHTML=`Mobile文本 <span class='diff-added diff-con'>diff: ${diffCount2}</span>`});cyBtn[2].addEventListener('click',function(){compareTexts(text_htmlContainer,text_txtContainer);diffTitle[0].innerHTML=`HTML文本 <span class='diff-removed diff-con'>diff: ${diffCount1}</span>`;diffTitle[1].innerHTML=`TXT文本 <span class='diff-added diff-con'>diff: ${diffCount2}</span>`});cyBtn[3].addEventListener('click',function(){diffCount1=diffCount2=0;spansText[0].innerHTML='';spansText[1].innerHTML='';link_desktopContainer.forEach((link,index)=>{compareLinks(link,link_mobileContainer[index])});diffTitle[0].innerHTML=`Desktop链接 <span class='diff-removed diff-con'>diff: ${diffCount1}</span>`;diffTitle[1].innerHTML=`Mobile链接 <span class='diff-added diff-con'>diff: ${diffCount2}</span>`});cyBtn[0].addEventListener('click',function(){const smalls=diffOutput.style.height;if(smalls=='60px'){diffOutput.style.height='auto';diffOutput.style.width='100%';cyBtn[0].innerText='收起';cyBtn[1].style.visibility=cyBtn[2].style.visibility=cyBtn[3].style.visibility='visible'}else{diffOutput.style.height='60px';diffOutput.style.width='60px';diffOutput.style.overflow='hidden';cyBtn[0].innerText='展开';cyBtn[1].style.visibility=cyBtn[2].style.visibility=cyBtn[3].style.visibility='hidden'}})})();
">Text
            Compare</a>

        <a class="dragText"
            href="javascript:(function(){let uikit_link=document.createElement('link');uikit_link.rel='stylesheet',uikit_link.href='https://cdn.jsdelivr.net/npm/uikit@3.21.9/dist/css/uikit.min.css';let uikit_script=document.createElement('script');uikit_script.src='https://cdn.jsdelivr.net/npm/uikit@3.21.9/dist/js/uikit.min.js',uikit_script.defer=!0;let ukicon_script=document.createElement('script');ukicon_script.src='https://cdn.jsdelivr.net/npm/uikit@3.21.9/dist/js/uikit-icons.min.js',ukicon_script.defer=!0;let head=document.head||document.getElementsByTagName('head')[0];head.appendChild(uikit_link),head.appendChild(uikit_script),head.appendChild(ukicon_script);const style=document.createElement('style');style.textContent=`
            .diff-box{display:flex;justify-content:space-between;padding:0 10px}.diff-case{width:48%;border:1px solid #999;font-size:14px;padding:10px}.diff-output{width:100%;max-height:100vh;overflow:auto;position:fixed;top:0;background-color:rgba(255,250,254,0.98);padding:10px 8px;border:1px solid #666;box-shadow:0 4px 8px rgba(0,0,0,0.2)}.uk-button{margin-right:4px;border-radius:4px;font-size:12px;line-height:20px;padding:0 6px}.uk-button-default{border:1px solid #333}.uk-button-link{text-decoration:underline}#modal-onecheck dt,#modal-tool dt{padding:10px 0 6px!important;margin:10px 0 0!important}#modal-onecheck dd,#modal-tool dd{font-size:14px!important}
        `,document.head.appendChild(style);const htmlElement=`
          <div class='diff-output'><div><button class='uk-button uk-button-secondary pickup'>收起</button><button class='uk-button uk-button-secondary clear'>清除所有高亮显示</button><span style='color: #cdd5d5;padding: 0 8px;'>|</span><button class='uk-button uk-button-default spaces'>显示空格</button><button class='uk-button uk-button-default words'>英文高亮</button><button class='uk-button uk-button-default footnotes'>角标高亮</button><span style='color: #cdd5d5;padding: 0 8px;'>|</span><button class='uk-button uk-button-primary onecheck'uk-toggle='target: #modal-onecheck'>一键检测</button><button class='uk-button uk-button-default tool'uk-toggle='target: #modal-tool'>工具说明</button></div><div id='modal-tool'uk-modal><div class='uk-modal-dialog uk-modal-body uk-overflow-auto uk-modal-container'style='width:50%'><h3 class='uk-modal-title uk-heading-divider'>ic平台一键Check工具说明</h3><dl class='uk-description-list uk-description-list-divider'><dt><button class='uk-button uk-button-secondary'>清除所有高亮显示</button></dt><dd>清除页面上所有的高亮样式，包括显示空格、英文高亮以及角标高亮。</dd><dt><button class='uk-button uk-button-default'>显示空格</button></dt><dd>显示页面中所有的空格，可以和英文高亮配合使用，方便检查英文前后是否有遗漏空格的问题。注：空格高亮会占用宽度导致文字布局发生变化，请忽略。</dd><dt><button class='uk-button uk-button-default'>英文高亮</button></dt><dd>将页面中的英文用高亮颜色显示，可以和显示空格配合使用，检查英文关键字是否有断行，以及前后是否有空格。</dd><dt><button class='uk-button uk-button-default'>角标高亮</button></dt><dd>将页面中的所有角标以红色高亮显示，鼠标浮动上去即可显示对应的legal条款内容。</dd><dt><button class='uk-button uk-button-primary'>一键检测</button></dt><dd><div>*检查电话号码是否本地化正确</div><div>*检查价格单位是否本地化正确</div><div>*检查所有图片地址前缀是否一致</div><div>*检查每个链接地址是否都有本地化（仅供参考）</div><div>*检查是否有未正确转换的链接变量</div><div>*检查链接地址cid是否正确，是否有多个cid或者缺少cid的情况</div><div>*待开发......</div></dd></dl><p class='uk-text-right'><button class='uk-button uk-button-primary uk-modal-close'type='button'>我已知晓</button></p></div></div><div id='modal-onecheck'uk-modal><div class='uk-modal-dialog uk-modal-body uk-overflow-auto uk-modal-container'style='width:50%'><div class='uk-modal-title uk-heading-divider'>一键检测</div><dl class='uk-description-list uk-description-list-divider'id='onecheckList'><dt><span>检查电话号码是否本地化正确：</span><span class='signIcon'ratio='1'></span></dt><dd></dd><dt><span>检查价格单位是否本地化正确：</span><span class='signIcon'ratio='1'></span></dt><dd></dd><dt><span>检查所有图片地址前缀是否一致：</span><span class='signIcon'ratio='1'></span></dt><dd></dd><dt><span>检查每个链接地址是否都有本地化：</span><span class='signIcon'ratio='1'></span></dt><dd></dd><dt><span>检查是否有未正确转换的链接变量：</span><span class='signIcon'ratio='1'></span></dt><dd></dd><dt><span>检查链接地址cid是否正确，是否有多个cid或者缺少cid的情况：</span><span class='signIcon'ratio='1'></span><dd></dd></dl><p class='uk-text-right'><button class='uk-button uk-button-primary uk-modal-close'type='button'>close</button></p></div></div></div>
    `;document.body.insertAdjacentHTML('beforeend',htmlElement);let iframewindow_des=document.getElementById('iframe_0').contentWindow,iframewindow_mob=document.getElementById('iframe_1').contentWindow;const diffOutput=document.querySelector('.diff-output'),pickupBtn=document.querySelector('button.pickup'),clearBtn=document.querySelector('button.clear'),spacesBtn=document.querySelector('button.spaces'),wordsBtn=document.querySelector('button.words'),footnotesBtn=document.querySelector('button.footnotes'),onecheckBtn=document.querySelector('button.onecheck');let spacesValue=!1,wordsValue=!1,footnotesValue=!1,onecheckValue=!1;function highlightSpaces(t){if(t.nodeType===Node.TEXT_NODE){let e=t.parentNode,n=t.textContent.replace(/\u00A0/g,' '),i=n.split(/(\S\s+ | \s+\S)/);i.forEach(n=>{if(/\S\s+\S/.test(n)){let i=n.split(/(\s)/);i.forEach(n=>{if(' '===n){let i=document.createElement('span');i.className='highlight-space',e.insertBefore(i,t)}else e.insertBefore(document.createTextNode(n),t)})}else e.insertBefore(document.createTextNode(n),t)}),e.removeChild(t)}else t.nodeType===Node.ELEMENT_NODE&&'SCRIPT'!==t.tagName&&'STYLE'!==t.tagName&&Array.from(t.childNodes).forEach(highlightSpaces)}function colorizeEnglishWords(t){if(t.nodeType===Node.TEXT_NODE){let e=t.parentNode,n=t.textContent,i=n.replace(/(\b[A-Za-z]+\b)/g,t=>`<span class='highlight-text'>${t}</span>`),o=document.createElement('div');for(o.innerHTML=i;o.firstChild;)e.insertBefore(o.firstChild,t);e.removeChild(t)}else t.nodeType===Node.ELEMENT_NODE&&'SCRIPT'!==t.tagName&&'STYLE'!==t.tagName&&Array.from(t.childNodes).forEach(colorizeEnglishWords)}function highlightFootnotes(t){let e=t.querySelectorAll('sup'),n=t.querySelector('.shared-footer'),i=n.getElementsByTagName('span');function o(t){if(t.nodeType===Node.TEXT_NODE){let e=t.parentNode,n=t.textContent,i=n.replace(/\*/g,t=>`<span class='sup_style sup_star'>${t}</span>`),d=document.createElement('div');for(d.innerHTML=i;d.firstChild;)e.insertBefore(d.firstChild,t);e.removeChild(t)}else t.nodeType===Node.ELEMENT_NODE&&'SCRIPT'!==t.tagName&&'STYLE'!==t.tagName&&Array.from(t.childNodes).forEach(o)}o(t.querySelector('.desktop-container')),o(t.querySelector('.mobile-container')),Array.from(e).forEach(t=>{t.classList.add('sup_style')});let d=[...Array.from(t.querySelectorAll('.sup_star')),...Array.from(e)];Array.from(i).forEach(t=>{d.forEach(e=>{if(t.textContent.trim()===e.textContent.trim()+'.'||'*'===t.textContent.trim()&&'*'===e.textContent.trim()){let n=t.parentElement,i=document.createElement('div');i.className='tooltip',e.parentNode.insertBefore(i,e);let o=document.createElement('div');o.className='tooltiptext',o.textContent=n.textContent,i.appendChild(e),i.appendChild(o)}})})}function oneButtonToCheck(t){let e=t.querySelector('.shared-footer'),n=document.querySelectorAll('#onecheckList .signIcon'),i=document.querySelectorAll('#onecheckList dd'),o={hk:{Tel:'800-908-988',price:'HK$',cid:'cid=CDM-HK-DM-C9999-M9999',href:'/hk'},hken:{Tel:'800-908-988',price:'HK$',cid:'cid=CDM-HK-DM-C9999-M9999',href:'/hk/en'},mo:{Tel:'',price:'MOP$',cid:'cid=CDM-MO-DM-C9999-M9999',href:'/mo'},cn:{Tel:'400-666-8800',price:'RMB',cid:'cid=CDM-CN-DM-C9999-M9999',href:'.cn'},tw:{Tel:'0800-020-021',price:'NT$',cid:'cid=CDM-TW-DM-C9999-M9999',href:'/tw'}},d=window.location.href,s=function t(e,n){for(let i of n)if(e.includes(i))return i.replace(/[./]/g,'');return null}(d,['/hk','/hk/en','/cn','.cn','/tw','/mo']);console.log('\uD83D\uDE80 ~ 当前语言 ~ currentArea:',s);let l=t.textContent.replace(/\s+/g,' ').trim(),a=e.textContent.replace(/\s+/g,' ').trim();function c(t,e,o,d){t?(n[e].classList.add('uk-text-success'),n[e].setAttribute('uk-icon','icon: check'),i[e].classList.add('uk-text-success'),i[e].innerHTML=`========= 当前语言：${s}，${o}`):(n[e].classList.add('uk-text-warning'),n[e].setAttribute('uk-icon','icon: warning'),i[e].classList.add('uk-text-warning'),i[e].innerHTML=`========= 当前语言：${s}，${d}`)}c(a.includes(o[s].Tel),0,`电话号码：${o[s].Tel}。`,`没有找到对应的电话号码。`);let r=[],u=['HK$','MOP$','RMB','NT$'];for(let p=0;p<u.length;p++)u[p]===o[s].price&&u.splice(p,1);u.forEach(t=>{l.includes(t)&&r.push(t)}),c(0==r.length,1,`价格单位：${o[s].price}。`,`出现其他地区价格单位${r.join('，')}。`);let h=t.querySelectorAll('img'),f=[],k=null;h.forEach(t=>{let e=t.src,n=e.match(/http.*\/i\//);if(n&&n[0]){let i=n[0];null===k?k=i:k!==i&&f.push(e)}}),c(0==f.length,2,`图片前缀地址一致：${k}。`,`出现异常的图片地址，请检查<br>${f.join('<br>')}。`);let b=['hk','cn','tw','mo','HK','CN','TW','MO'],g=[];t.querySelectorAll('a').forEach(t=>{let e=t.getAttribute('href'),n=b.some(t=>e.includes(t));n||e.includes('${')||g.push(e)}),c(0==g.length,3,`链接地址都以本地化。`,`可能有未本地化的链接，请检查<br>${g.join('<br>')}。`);let m=[];t.querySelectorAll('a').forEach(t=>{let e=t.getAttribute('href');e.includes('${')&&m.push(e)}),c(0==m.length,4,`链接变量都已转化为地址。`,`有未转化的链接变量，请检查<br>${m.join('<br>')}。`),o[s].cid;let y=[],$=[];t.querySelectorAll('a').forEach(t=>{let e=t.getAttribute('href');e.includes('?cid')||y.push(e);let n=[...e.matchAll(/cid/g)];n.length>1&&$.push(e)}),0==y.length&&0==$.length?(n[5].classList.add('uk-text-success'),n[5].setAttribute('uk-icon','icon: check'),i[5].classList.add('uk-text-success'),i[5].innerHTML=`========= 当前语言：${s}，所有链接都有唯一一个cid。`):y.length>0&&0==$.length?(n[5].classList.add('uk-text-warning'),n[5].setAttribute('uk-icon','icon: warning'),i[5].classList.add('uk-text-warning'),i[5].innerHTML=`========= 当前语言：${s}，下列链接可能没有cid，请检查<br>${y.join('<br>')}。`):$.length>0&&0==y.length?(n[5].classList.add('uk-text-warning'),n[5].setAttribute('uk-icon','icon: warning'),i[5].classList.add('uk-text-warning'),i[5].innerHTML=`========= 当前语言：${s}，下列链接可能有多个cid，请检查<br>${$.join('<br>')}。`):(n[5].classList.add('uk-text-warning'),n[5].setAttribute('uk-icon','icon: warning'),i[5].classList.add('uk-text-warning'),i[5].innerHTML=`========= 当前语言：${s}，下列链接含有多个cid，请检查<br>${$.join('<br>')}。下列链接可能没有cid，请检查${y.join('<br>')}`)}diffOutput.lang=document.getElementById('modal-onecheck').lang=document.getElementById('modal-tool').lang='zh-CN';const highlightstyle=`
                .highlight-space{display:inline-block;width:0.5em;height:1em;background-color:#00c180;vertical-align:bottom}.highlight-text{color:#ff8892}.sup_style{color:red;font-weight:700;font-size:35px;border:2px solid #000!important}.tooltip{position:relative;display:inline-block;cursor:pointer}.tooltip .tooltiptext{display:none;width:220px;height:160px;overflow:auto;font-size:12px;line-height:14px;background-color:black;color:#fff;border-radius:5px;padding:5px;position:absolute;z-index:1;bottom:85%;left:50%;margin-left:-110px}.tooltip:hover .tooltiptext{display:inline-block}
                    `;function createHighlightstyle(){let t=iframewindow_des.document.createElement('style'),e=iframewindow_mob.document.createElement('style');t.innerHTML=e.innerHTML=highlightstyle,iframewindow_des.document.head.appendChild(t),iframewindow_mob.document.head.appendChild(e)}function handleClearStyle(){spacesBtn.disabled=wordsBtn.disabled=footnotesBtn.disabled=!0,iframewindow_des.location.reload(),iframewindow_mob.location.reload(),document.getElementById('iframe_1').onload=function(){UIkit.notification({message:`<span uk-icon='icon: check'></span> 样式已清除`,status:'primary'}),createHighlightstyle(),spacesBtn.disabled=wordsBtn.disabled=footnotesBtn.disabled=!1},spacesValue=wordsValue=footnotesValue=!1}function handleVisbleSpaces(){if(!spacesValue){if(wordsValue){UIkit.notification({message:`<span uk-icon='icon: warning'></span> 若要英文高亮和显示空格同时显示，须先点击显示空格`,status:'warning'});return}highlightSpaces(iframewindow_des.document.body),highlightSpaces(iframewindow_mob.document.body),spacesValue=!0,spacesBtn.disabled=!0}}function handleHighlightWords(){!wordsValue&&(colorizeEnglishWords(iframewindow_des.document.body),colorizeEnglishWords(iframewindow_mob.document.body),wordsValue=!0,wordsBtn.disabled=!0)}function handleVisbleFootnotes(){!footnotesValue&&(highlightFootnotes(iframewindow_des.document.body),highlightFootnotes(iframewindow_mob.document.body),footnotesValue=!0,footnotesBtn.disabled=!0)}function handleOneCheck(){UIkit.notification({message:`<span uk-icon='icon: check'></span> 一键检测完成`,status:'success'}),UIkit.offcanvas(document.getElementById('offcanvas-flip')).show(),!onecheckValue&&(oneButtonToCheck(iframewindow_des.document.body),onecheckValue=!0)}createHighlightstyle(),pickupBtn.onclick=function(){'展开'===pickupBtn.innerText?(diffOutput.style.height='auto',diffOutput.style.width='100%',document.querySelectorAll('button').forEach(t=>{t.style.visibility='visible'}),pickupBtn.innerText='收起'):(diffOutput.style.height='50px',diffOutput.style.width='60px',diffOutput.style.overflow='hidden',document.querySelectorAll('button').forEach(t=>{'收起'!==t.innerText&&(t.style.visibility='hidden')}),pickupBtn.innerText='展开')},clearBtn.onclick=handleClearStyle,spacesBtn.onclick=handleVisbleSpaces,wordsBtn.onclick=handleHighlightWords,footnotesBtn.onclick=handleVisbleFootnotes,onecheckBtn.onclick=handleOneCheck;})()">Quick Check</a>

    </div>
    <script>
    </script>

</body>

</html>